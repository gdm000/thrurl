#!/usr/bin/env ruby

# example usage:
# ./thrurl -h "localhost" -p 5000 -m "checkinsPerLocation" -s "CheckinService" -a "{ user: { id: 1 } }"


require 'args_reader'
require 'client'
require 'thrift_generator'


configs = ArgsReader.new(ARGV).configs

thrift_module = ThriftGenerator.new(configs[:service]).generate_if_needed

puts Client.new(thrift_module::Client, configs).call